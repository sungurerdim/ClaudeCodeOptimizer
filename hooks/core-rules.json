{"hookSpecificOutput": {"hookEventName": "SessionStart", "additionalContext": "# Foundation Rules\n*Enforceable constraints with measurable thresholds*\n\n## Uncertainty Protocol [BLOCKER]\n\nWhen uncertain, STOP and surface it. Don't guess silently.\n\n- **Stop-When-Unclear**: If task is ambiguous → ask before proceeding\n- **Signal-Confidence**: State confidence level: \"~90% sure\", \"uncertain about X\"\n\n## Complexity Limits [BLOCKER]\n\nCode exceeding limits = STOP and refactor first.\n\n| Metric | Limit |\n|--------|-------|\n| Cyclomatic Complexity | ≤ 15 |\n| Method Lines | ≤ 50 |\n| File Lines | ≤ 500 |\n| Nesting Depth | ≤ 3 |\n| Parameters | ≤ 4 |\n\n## File Creation [BLOCKER]\n\n**BLOCK**: Creating new files without explicit user request.\n\nSkip: `.git`, `node_modules`, `vendor`, `venv`, `dist`, `build`, `__pycache__`\n\n## Change Scope [BLOCKER]\n\n**Test**: Can every changed line trace directly to user's request?\n\n- NO → Revert that change\n- Unrelated issues → mention, don't fix\n\n## Code Volume [CHECK]\n\n- [ ] No single-use abstractions\n- [ ] No impossible error handling\n- [ ] 100+ lines → could it be 50? Rewrite if yes\n\n## Validation Boundaries [CHECK]\n\n| Input Type | Required |\n|------------|----------|\n| Numbers | min/max bounds |\n| Strings | max length |\n| Arrays | max items |\n| External calls | timeout |\n| Resources | cleanup in finally |\n\n# Safety Rules\n*BLOCKER violations*\n\n## Security Violations [BLOCKER]\n\nFinding ANY = STOP. Fix before continuing.\n\n| Pattern | Fix |\n|---------|-----|\n| Secrets in source | Move to env vars |\n| Bare except/catch | Catch specific types |\n| Empty catch blocks | Add handling |\n| Unsanitized external data | Add validation |\n| eval/pickle/yaml.load | Use safe alternatives |\n\n## Security Lookup [CHECK]\n\n| Safe | Unsafe |\n|------|--------|\n| `json.loads()` | `pickle.load()`, `eval()` |\n| bcrypt, argon2 | MD5, SHA1, plaintext |\n| TLS 1.2+ | HTTP, TLS 1.0/1.1 |\n\n# Workflow Rules\n*Execution patterns*\n\n## Read-Before-Edit [BLOCKER]\n\n**BLOCK**: Any edit to file not yet read.\n\nVerify functions/APIs exist before calling.\n\n## Task Completion [BLOCKER]\n\n**BLOCK**: Stopping early due to perceived limits.\n\nCheckpoints: Every 20 steps progress, every 5 steps goal check.\n\n## Severity Levels [CHECK]\n\n| Level | Criteria |\n|-------|----------|\n| CRITICAL | Security, data loss, crash |\n| HIGH | Broken functionality |\n| MEDIUM | Suboptimal but works |\n| LOW | Style only |\n\n**When uncertain → lower severity.**\n\n## No Deferrals [BLOCKER - Auto Mode]\n\nWhen `--auto` active:\n\n| Never Say | Do Instead |\n|-----------|------------|\n| \"Too complex\" | Fix it |\n| \"Might break\" | Fix it, user reviews |\n| \"Consider later\" | Do it NOW |\n\n## Finding Display Format [CHECK]\n\n| Context | Format |\n|---------|--------|\n| Line | `[{SEVERITY}] {id}: {title} in {file}:{line}` |\n| Table | Severity column always present |\n| Blocker | `[{SEVERITY}] {id}: {message}` |\n\n## Accounting [BLOCKER]\n\n`applied + failed + needs_approval = total`\n\nNo declined category. Fix, flag for approval (architectural), or fail with technical reason."}}
